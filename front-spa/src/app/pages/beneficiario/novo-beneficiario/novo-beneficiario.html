<section class="mx-4 mt-3 px-4 py-3 bg-white rounded-lg">
  <h1 class="text-2xl">{{ pageTitle }}</h1>
</section>

<section class="mx-4 mt-3 px-4 py-3 bg-white rounded-lg">
  <form [formGroup]="_form">
    <div class="mb-4">
      <label for="username" class="block text-surface-900 font-medium mb-2"> Nome completo </label>
      <input
        formControlName="nome_completo"
        id="username"
        type="text"
        placeholder="Nome"
        class="w-full mb-1 border-2 border-gray-300 py-1 px-2 rounded-xl"
        [ngClass]="{
          'ng-dirty ng-invalid':
            this._form.controls.nome_completo.invalid && this._form.controls.nome_completo.touched
        }"
        required
      />
      @if (this._form.controls.nome_completo.invalid && this._form.controls.nome_completo.touched) {
      <p class="text-xs text-red-500 font-bold ml-1">Campo nome deve ser preenchido.</p>
      }
    </div>

    <div class="mb-4">
      <label for="cpf" class="block text-surface-900 font-medium mb-2"> CPF </label>
      <input
        formControlName="cpf"
        id="cpf"
        type="text"
        placeholder="CPF"
        class="w-full mb-1 border-2 border-gray-300 py-1 px-2 rounded-xl"
        [ngClass]="{
          'ng-dirty ng-invalid': this._form.controls.cpf.invalid && this._form.controls.cpf.touched
        }"
        required
      />
      @if (this._form.controls.cpf.invalid && this._form.controls.cpf.touched) {
      <p class="text-xs text-red-500 font-bold ml-1">Campo CPF deve ser preenchido.</p>
      }
    </div>

    <div class="mb-4">
      <label for="dateOfBirth" class="block text-surface-900 font-medium mb-2">
        Data nascimento
      </label>
      <input
        formControlName="data_nascimento"
        id="dateOfBirth"
        type="date"
        class="w-full mb-1 border-2 border-gray-300 py-1 px-2 rounded-xl"
        [ngClass]="{
          'ng-dirty ng-invalid':
            this._form.controls.data_nascimento.invalid &&
            this._form.controls.data_nascimento.touched
        }"
        required
      />
      @if (this._form.controls.data_nascimento.invalid && this._form.controls.data_nascimento.touched) {
        <p class="text-xs text-red-500 font-bold ml-1">
          Campo data de nascimento deve ser preenchido.
        </p>
      }
    </div>

    <div class="mb-4">
      <label for="status" class="block text-surface-900 font-medium mb-2">
        Status
      </label>
      <select
        formControlName="status"
        id="status"
        class="w-full mb-1 border-2 border-gray-300 py-1 px-2 rounded-xl"
      >
        <option value="ATIVO">Ativo</option>
        <option value="INATIVO">Inativo</option>
      </select>
    </div>

    <div class="mb-4">
      <label for="planoId" class="block text-surface-900 font-medium mb-2">
        Planos
      </label>
      <select
        formControlName="planoId"
        id="planoId "
        class="w-full mb-1 border-2 border-gray-300 py-1 px-2 rounded-xl"
      >
        @for (p of planos; track p.id; let first = $first) {
          <option [value]="p.id">{{ p.nome }}</option>
        }
      </select>
    </div>
  </form>
</section>

<section class="mx-4 mt-3 px-4 py-3 bg-white rounded-lg flex flex-row justify-end">
  @if (pageMode === 'create') {
    <button
      (click)="onSave()"
      class="px-2 rounded-lg bg-[#1bc95b] text-white hover:cursor-pointer hover:scale-110 mr-1"
    >
      <i class="pi pi-save"></i>
    </button>
  }
  @else {
    <button
      (click)="onEdit()"
      class="px-2 rounded-lg bg-[#1bc95b] text-white hover:cursor-pointer hover:scale-110 mr-1"
    >
      <i class="pi pi-save"></i>
    </button>
  }

  <button 
    (click)="returnToList()" 
    class="px-2 rounded-lg bg-[#ef4444] text-white hover:cursor-pointer hover:scale-110"
  >
    <i class="pi pi-times"></i>
  </button>
</section>
